<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="CSS/style.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/220fe8c60c.js" crossorigin="anonymous"></script>

    <script src="JS/database.js"></script>
    <script src="JS/cru-code.js"></script>
    <title>Repair Details</title>
</head>


<body>
    <header id="header">
    </header>

    <main>
        <form action="view_repairs.html" novalidate>
            <div class="main-form">
                <fieldset>
                    <legend>Repair Details</legend>

                    <div class="col">
                        <div>
                            <label for="total-time"><b>Total time</b></label>
                            <input id="total-time" type="text" required readonly value="3.1 hours"
                                style=" font-size: 16px; width: 100px;">
                        </div>
                        <div>
                            <label for="StartDate"><b>Start Time</b></label>
                            <input class="time-input" type="time" id="StartDate" readonly value="10:28">
                            <br>
                            <br>
                            <label for="EndDate"><b>End time</b></label>
                            <input class="time-input" type="time" id="EndDate" readonly>
                        </div>
                    </div>
                    <br>
                    <br>
                    <hr>
                    <div class="txtDesc">
                        <label for="description"><b>Customer's Description:</b></label>
                        <textarea class="description" id="description"
                            readonly>Making a funny 'wheeeeeeee' sort of noise.</textarea>
                    </div>
                    <br>
                    <br>
                    <hr>
                    <span style="display: flex;">
                        <i class='far fa-question-circle'
                            title="Select a part from the dropdown list to add to the 'parts used' section"
                            style='font-size:17px; color: blue; cursor: pointer; margin-right: 5px;'></i>
                        <label for="part-options"><b>Parts</b></label>
                    </span>
                    <select id="part-options">
                        <option value="">Choose a part...</option>
                        <option value="flywheel">Flywheel</option>
                        <option value="engine block">Engine block</option>
                        <option value="sparkplug">Spark plug</option>
                    </select>
                    <div class="txtDesc">
                        <label for="parts"><b>Parts used:</b></label>
                        <textarea class="description" id="parts" readonly></textarea>
                    </div>
                    <br>
                    <div class="txtDesc">
                        <span style="display: flex;">
                            <i class='far fa-question-circle' title="Enter a description of the repair process"
                                style='font-size:17px; color: blue; cursor: pointer; margin-right: 5px;'></i>
                            <label for="techDesc"><b>Technician's description:</b></label>
                        </span>
                        <textarea class="description" id="techDesc"></textarea>
                    </div>
                    <div class="btn btn-small">
                        <button id="reset" style="height: 35px;" onclick="return Clear()">
                            <span>Clear</span>
                        </button>
                    </div>
                    <br>
                    <br>
                    <div>
                        <label for="chkFinalized" style="display: inline-block;"><b>Finish repair:</b></label>
                        <input id="chkFinalized" type="checkbox" class="chk-finalize">
                    </div>
                    <div style="display: flex; flex-direction: row;">
                        <div class="btn" style="margin-left: 200px;">
                            <button id="pauseBtn">
                                <span>Pause Repair</span>
                            </button>
                        </div>
                        <div class="btn" style="margin-left: 0px;">
                            <button id="saveBtn">
                                <span>Save Repair</span>
                            </button>
                        </div>
                    </div>
                    <div class="btn btn-small">
                        <button onclick="history.back()" formnovalidate>
                            <span>Back</span>
                        </button>
                    </div>
                </fieldset>
            </div>
        </form>
    </main>
    <footer>
        <h3> &copy; Webcrafters 2023</h3>
    </footer>
    <script src="JS/header-template.js"></script>
    <script src="JS/context-help.js"></script>
    <script>
        GenerateContextHelp(["<p>The repair details page shows details for an on-going repair.</p>",
            `<p>Choosing a part from the 'Parts' dropdown will add it to the 'parts used' area.</p>`,
            `<p>Pressing the 'Save Repair' button will save the repair details</p>`,
            `<p>If you are not finished with the repair, uncheck 'Finish repair' and press 'Save Repair'</p>`,
        ])
    </script>
    <script>
        let parts = document.getElementById("part-options");
        let description = document.getElementById("parts");
        let techDesc = document.getElementById("techDesc");
        parts.addEventListener("change", PartSelected);

        function PartSelected() {
            if (parts.value != "")
                description.innerHTML += `${parts.value}, `;
            parts.selectedIndex = 0;
        }

        function Clear() {
            description.innerHTML = "";
            techDesc.value = "";
            return false;
        }
    </script>
</body>

</html>